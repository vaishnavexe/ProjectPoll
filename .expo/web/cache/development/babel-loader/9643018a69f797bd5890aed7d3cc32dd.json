{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { StatusBar } from 'expo-status-bar';\nimport { useCallback, useEffect, useState } from 'react';\nimport fetchPollingData from \"../API/apiFetch\";\nimport Paginations from \"../components/Paginations\";\nimport { TableDataLabel } from \"../components/Table\";\nimport { createShortString, parseDateStamp } from \"../API/Data\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var HomeScreen = function HomeScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var p = 20;\n  var counter = 0;\n  useEffect(function () {\n    apiCall(counter);\n    var interval = setInterval(function () {\n      apiCall(counter);\n    }, 10000);\n    return function () {\n      return clearInterval(interval);\n    };\n  }, []);\n\n  var apiCall = function apiCall(page) {\n    fetchPollingData(page).then(function (res) {\n      counter++;\n      return res.hits;\n    }).then(function (body) {\n      return setData(function (prevState) {\n        return [].concat(_toConsumableArray(prevState), _toConsumableArray(body));\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n\n  var onPageChanged = useCallback(function (e, page) {\n    e.preventDefault();\n    setCurrentPage(page);\n  }, [currentPage]);\n  var currentData = data.slice((currentPage - 1) * p, (currentPage - 1) * p + p);\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    var title = item.title,\n        url = item.url,\n        created_at = item.created_at,\n        author = item.author;\n    var newShortTitle = createShortString(title);\n    var urlDomain = url == null ? void 0 : url.split('/')[2];\n    var newShorAuther = createShortString(author);\n    var newCreatedAt = parseDateStamp(created_at);\n    return _jsxs(TouchableOpacity, {\n      style: styles.tableContent,\n      onPress: function onPress() {\n        return navigation.navigate('Detail', {\n          item: item\n        });\n      },\n      children: [_jsx(View, {\n        style: styles.tableCol,\n        children: _jsx(Text, {\n          style: styles.tableContentLink,\n          onPress: function onPress() {\n            return Linking.openURL(url);\n          },\n          children: urlDomain ? urlDomain : 'unavailable'\n        })\n      }), \"#D3D3D3\", _jsx(View, {\n        style: [styles.tableCol, {\n          alignItems: 'center'\n        }],\n        children: _jsx(Text, {\n          children: newCreatedAt\n        })\n      }), _jsx(View, {\n        style: [styles.tableCol, styles.tableLastCol],\n        children: _jsx(Text, {\n          children: newShorAuther\n        })\n      })]\n    });\n  };\n\n  var RenderData = function RenderData(_ref3) {\n    var data = _ref3.data;\n    return _jsx(FlatList, {\n      nestedScrollEnabled: true,\n      data: currentData,\n      renderItem: renderItem,\n      ListFooterComponent: _jsx(Paginations, {\n        totalRecords: data.length,\n        pageLimit: p,\n        pageNeighbours: 2,\n        onPageChanged: onPageChanged,\n        currentPage: currentPage\n      }),\n      keyExtractor: function keyExtractor(item, index) {\n        return index.toString();\n      }\n    });\n  };\n\n  return _jsxs(View, {\n    style: styles.tableContainer,\n    children: [_jsx(TableDataLabel, {\n      tabelHeadings: {\n        title: \"Title\",\n        url: \"Url\",\n        createdAt: \"Created At\",\n        author: \"Author\"\n      }\n    }), _jsx(RenderData, {\n      data: data\n    }), _jsx(StatusBar, {\n      style: \"auto\",\n      hidden: true\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  tableContainer: {\n    flex: 1,\n    marginTop: 50,\n    alignItems: 'center'\n  },\n  tableContent: {\n    flexDirection: 'row',\n    paddingHorizontal: 10,\n    backgroundColor: '#f3f3f3',\n    borderBottomColor: 'black',\n    borderBottomWidth: 2\n  },\n  tableContentLink: {\n    fontSize: 10,\n    textAlign: 'center'\n  },\n  tableCol: {\n    width: 100,\n    paddingVertical: 10,\n    paddingHorizontal: 2,\n    borderRightColor: '#55555585',\n    borderRightWidth: .5\n  },\n  tableFirstCol: {\n    paddingLeft: 0,\n    paddingRight: 5\n  },\n  tableLastCol: {\n    paddingRight: 0,\n    paddingLeft: 5,\n    borderRightColor: undefined,\n    borderRightWidth: 0\n  }\n});","map":{"version":3,"names":["StatusBar","useCallback","useEffect","useState","fetchPollingData","Paginations","TableDataLabel","createShortString","parseDateStamp","HomeScreen","navigation","data","setData","currentPage","setCurrentPage","p","counter","apiCall","interval","setInterval","clearInterval","page","then","res","hits","body","prevState","catch","error","console","log","onPageChanged","e","preventDefault","currentData","slice","renderItem","item","title","url","created_at","author","newShortTitle","urlDomain","split","newShorAuther","newCreatedAt","styles","tableContent","navigate","tableCol","tableContentLink","Linking","openURL","alignItems","tableLastCol","RenderData","length","index","toString","tableContainer","createdAt","StyleSheet","create","flex","marginTop","flexDirection","paddingHorizontal","backgroundColor","borderBottomColor","borderBottomWidth","fontSize","textAlign","width","paddingVertical","borderRightColor","borderRightWidth","tableFirstCol","paddingLeft","paddingRight","undefined"],"sources":["C:/Users/vaish/Apps/projectpolling/screen/HomeScreen.tsx"],"sourcesContent":["import { View, Text, FlatList, StyleSheet, Linking, TouchableOpacity } from 'react-native';\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport fetchPollingData from '../API/apiFetch';\r\nimport Paginations from '../components/Paginations';\r\nimport { TableDataLabel } from '../components/Table';\r\nimport { createShortString, parseDateStamp } from '../API/Data'\r\n\r\nexport const HomeScreen = ({ navigation }: { navigation: any }) => {\r\n    const [data, setData] = useState<object[]>([]);\r\n    const [currentPage, setCurrentPage] = useState<number>(1);\r\n    const p = 20\r\n    let counter = 0\r\n\r\n    useEffect(() => {        \r\n        apiCall(counter);\r\n\r\n    const interval = setInterval(() => {\r\n        apiCall(counter);\r\n        }, 10000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [])\r\n\r\n    const apiCall = (page: number) => {\r\n        fetchPollingData(page)\r\n            .then(res => {\r\n            counter++;\r\n            return res.hits;\r\n     })\r\n        .then(body => setData(prevState => [...prevState, ...body]))\r\n        .catch(error => console.log(error))\r\n    }\r\n\r\n    const onPageChanged = useCallback((e: ProgressEvent, page: any) => {\r\n        e.preventDefault();\r\n        setCurrentPage(page);\r\n    }, [currentPage]);\r\n\r\n    const currentData = data.slice(\r\n        (currentPage - 1) * p,\r\n        (currentPage - 1) * p + p\r\n    );\r\n\r\n    const renderItem = ({ item }: any) => {\r\n        const { title, url, created_at, author } = item\r\n\r\n        const newShortTitle = createShortString(title)\r\n        const urlDomain = url?.split('/')[2];\r\n        const newShorAuther = createShortString(author)\r\n        const newCreatedAt = parseDateStamp(created_at);\r\n\r\n        return (\r\n            <TouchableOpacity style={styles.tableContent} onPress={() => navigation.navigate('Detail', { item })}>\r\n               \r\n                <View style={styles.tableCol}>\r\n                    <Text\r\n                        style={styles.tableContentLink}\r\n                        onPress={() => Linking.openURL(url)}>\r\n                        {urlDomain ? urlDomain : 'unavailable'}\r\n                    </Text>\r\n                </View>\r\n                #D3D3D3\r\n                <View style={[styles.tableCol, { alignItems: 'center' }]}>\r\n                    <Text>{newCreatedAt}</Text>\r\n                </View>\r\n                <View style={[styles.tableCol, styles.tableLastCol]}>\r\n                    <Text>{newShorAuther}</Text>\r\n                </View>\r\n            </TouchableOpacity>\r\n        )\r\n    }\r\n    const RenderData = ({ data }: any) => {\r\n        return (\r\n            <FlatList\r\n                nestedScrollEnabled\r\n                data={currentData}\r\n                renderItem={renderItem}\r\n                ListFooterComponent={\r\n                    <Paginations\r\n                        totalRecords={data.length}\r\n                        pageLimit={p}\r\n                        pageNeighbours={2}\r\n                        onPageChanged={onPageChanged}\r\n                        currentPage={currentPage} />\r\n                }\r\n                keyExtractor={(item, index) => index.toString()} />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <View style={styles.tableContainer}>\r\n\r\n            <TableDataLabel\r\n                tabelHeadings={{\r\n                    title: \"Title\",\r\n                    url: \"Url\",\r\n                    createdAt: \"Created At\",\r\n                    author: \"Author\"\r\n                }} />\r\n\r\n            <RenderData data={data} />\r\n\r\n            <StatusBar style=\"auto\" hidden />\r\n        </View>\r\n    )\r\n}\r\nconst styles = StyleSheet.create({\r\n    tableContainer: {\r\n        flex: 1,\r\n        marginTop: 50,\r\n        alignItems: 'center',\r\n    },\r\n    tableContent: {\r\n        flexDirection: 'row',\r\n        paddingHorizontal: 10,\r\n        backgroundColor: '#f3f3f3',\r\n        borderBottomColor: 'black',\r\n        borderBottomWidth: 2,\r\n    },\r\n    tableContentLink: {\r\n        fontSize: 10,\r\n        textAlign: 'center'\r\n    },\r\n    tableCol: {\r\n        width: 100,\r\n        paddingVertical: 10,\r\n        paddingHorizontal: 2,\r\n        borderRightColor: '#55555585',\r\n        borderRightWidth: .5\r\n    },\r\n    tableFirstCol: {\r\n        paddingLeft: 0,\r\n        paddingRight: 5,\r\n    },\r\n    tableLastCol: {\r\n        paddingRight: 0,\r\n        paddingLeft: 5,\r\n        borderRightColor: undefined,\r\n        borderRightWidth: 0\r\n    }\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}